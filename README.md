# DocsHub

A modern, real-time collaborative document and spreadsheet editor built with Django, React, and WebSockets.

![DocsHub](Docs-Hub.png)

## ğŸŒŸ Features

- **Real-time Collaborative Editing**: Multiple users can edit documents and spreadsheets simultaneously
- **Rich Text Editor**: Powered by Quill with formatting options
- **Spreadsheet Editor**: Full-featured grid with formulas using Handsontable
- **WebSocket Sync**: Instant updates across all connected clients
- **Role-Based Access**: Owner, Editor, Commenter, and Viewer roles
- **User Authentication**: Secure login and registration
- **Document Management**: Create, share, and organize documents/spreadsheets
- **Export**: Download documents as .txt files
- **Notifications**: Real-time notifications for shares and comments

## ğŸ› ï¸ Tech Stack

### Backend
- **Django 4.2** - Web framework
- **Django Channels 4.0** - WebSocket support
- **Redis** - Channel layer for real-time messaging
- **Celery** - Background task processing
- **PostgreSQL/SQLite** - Database

### Frontend
- **React 18** - UI library
- **TypeScript** - Type safety
- **Vite** - Build tool
- **TailwindCSS** - Styling
- **React Router** - Navigation
- **Zustand** - State management
- **Quill** - Rich text editor
- **Handsontable** - Spreadsheet component

## ğŸ“‹ Prerequisites

Before you begin, ensure you have the following installed:

- **Python 3.10+** ([Download](https://www.python.org/downloads/))
- **Node.js 18+** and npm ([Download](https://nodejs.org/))
- **Redis** ([Installation guide](https://redis.io/docs/getting-started/installation/))
- **Git** ([Download](https://git-scm.com/downloads))

## ğŸš€ Installation & Setup

Follow these steps to get DocsHub running on your local machine:

### Step 1: Clone the Repository

```bash
git clone <your-repo-url>
cd DocsHub
```

### Step 2: Set Up Python Virtual Environment

```bash
# Create virtual environment
python -m venv venv

# Activate virtual environment
# On Linux/Mac:
source venv/bin/activate
# On Windows:
# venv\Scripts\activate
```

### Step 3: Install Python Dependencies

```bash
pip install -r requirements.txt
```

### Step 4: Install Node.js Dependencies

```bash
npm install
```

### Step 5: Set Up Database

```bash
# Run migrations to create database tables
python manage.py migrate

# Create a superuser account for admin access
python manage.py createsuperuser
# Follow the prompts to enter username, email, and password
```

### Step 6: Build Frontend

```bash
# Build the React frontend
npm run build
```

This compiles the React app into static files that Django will serve.

### Step 7: Collect Static Files (Optional)

```bash
# Collect all static files for production
python manage.py collectstatic --noinput
```

## ğŸ® Running the Application

You need to start three services in separate terminal windows/tabs:

### Terminal 1: Start Redis Server

Redis is required for WebSocket channel layers.

```bash
# Start Redis server
redis-server

# Keep this terminal running
```

### Terminal 2: Start Django Server

```bash
# Make sure virtual environment is activated
source venv/bin/activate  # or venv\Scripts\activate on Windows

# Start Django development server
python manage.py runserver

# Keep this terminal running
# Server will be available at http://localhost:8000
```

### Terminal 3: Start Celery Worker (Optional)

Celery handles background tasks like notifications.

```bash
# Make sure virtual environment is activated
source venv/bin/activate  # or venv\Scripts\activate on Windows

# Start Celery worker
celery -A docshub worker -l info

# Keep this terminal running
```

## ğŸŒ Access the Application

Once all services are running:

- **Frontend Application**: http://localhost:8000
- **Django Admin Panel**: http://localhost:8000/admin
  - Login with the superuser credentials you created

## ğŸ“ Project Structure

```
DocsHub/
â”œâ”€â”€ docshub/              # Django project settings
â”‚   â”œâ”€â”€ settings.py       # Main settings
â”‚   â”œâ”€â”€ urls.py           # URL routing
â”‚   â”œâ”€â”€ asgi.py           # ASGI config for WebSockets
â”‚   â””â”€â”€ celery.py         # Celery configuration
â”œâ”€â”€ accounts/             # User authentication app
â”œâ”€â”€ documents/            # Document management app
â”œâ”€â”€ spreadsheets/         # Spreadsheet management app
â”œâ”€â”€ collaboration/        # WebSocket consumers for real-time sync
â”œâ”€â”€ notifications/        # Notification system
â”œâ”€â”€ src/                  # React frontend source code
â”‚   â”œâ”€â”€ pages/            # Page components
â”‚   â”œâ”€â”€ components/       # Reusable UI components
â”‚   â”œâ”€â”€ services/         # WebSocket and API services
â”‚   â”œâ”€â”€ api.ts            # API client
â”‚   â”œâ”€â”€ store.ts          # Global state management
â”‚   â””â”€â”€ App.tsx           # Main React component
â”œâ”€â”€ static/dist/          # Built frontend (generated by npm run build)
â”œâ”€â”€ public/               # Public assets
â”œâ”€â”€ manage.py             # Django management script
â”œâ”€â”€ requirements.txt      # Python dependencies
â”œâ”€â”€ package.json          # Node.js dependencies
â””â”€â”€ vite.config.ts        # Vite configuration

```

## ğŸ”§ Development Workflow

### Making Frontend Changes

1. Edit files in the `src/` directory
2. Rebuild the frontend:
   ```bash
   npm run build
   ```
3. Refresh your browser to see changes

### Making Backend Changes

1. Edit Django files (Python files in `docshub/`, `documents/`, etc.)
2. Django's development server auto-reloads, so changes appear immediately
3. If you modify models, create and run migrations:
   ```bash
   python manage.py makemigrations
   python manage.py migrate
   ```

### Adding New Python Packages

```bash
pip install <package-name>
pip freeze > requirements.txt
```

### Adding New Node.js Packages

```bash
npm install <package-name>
```

## ğŸ› Troubleshooting

### Redis Connection Error

**Error**: `Cannot connect to Redis`

**Solution**: Make sure Redis is running:
```bash
redis-server
```

### Port Already in Use

**Error**: `Error: That port is already in use`

**Solution**: Either:
- Kill the process using the port, or
- Run Django on a different port:
  ```bash
  python manage.py runserver 8001
  ```

### WebSocket Connection Failed

**Issue**: Real-time editing not working

**Solution**: 
1. Ensure Redis is running
2. Check that Django server is running with ASGI support
3. Clear browser cache and cookies

### Build Errors

**Error**: Frontend build fails

**Solution**:
```bash
# Remove node_modules and reinstall
rm -rf node_modules package-lock.json
npm install
npm run build
```

### Database Locked

**Error**: `Database is locked` (SQLite)

**Solution**: Close all connections to the database or use PostgreSQL for production

## ğŸ“ Usage Guide

### Creating a Document

1. Login or register an account
2. Click "New Document" on the dashboard
3. Enter a title and start editing
4. Changes are auto-saved and synced in real-time

### Sharing a Document

1. Open a document you own
2. Click the "Share" button
3. Enter the email of the user you want to share with
4. Select their permission level (Editor, Commenter, or Viewer)
5. Click "Share"

### Collaborative Editing

- Multiple users can edit the same document simultaneously
- Changes appear in real-time for all connected users
- No manual save needed - everything auto-saves

### Downloading Documents

1. Open a document
2. Click the three dots (â‹®) menu in the top right
3. Select "Download as .txt"

## ğŸš¢ Production Deployment

For production deployment, consider:

1. **Use PostgreSQL** instead of SQLite
2. **Set `DEBUG = False`** in `settings.py`
3. **Configure ALLOWED_HOSTS** properly
4. **Use a production ASGI server** like Daphne or Uvicorn
5. **Set up HTTPS** for secure WebSocket connections (wss://)
6. **Use a reverse proxy** like Nginx
7. **Set environment variables** for secrets (SECRET_KEY, database passwords)
8. **Configure static file serving** properly

Example production services:
- **Hosting**: AWS, DigitalOcean, Heroku
- **Database**: PostgreSQL on AWS RDS or similar
- **Redis**: Redis Cloud, AWS ElastiCache
- **Static Files**: S3, Cloudflare CDN

## ğŸ¤ Contributing

Contributions are welcome! Please:

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Test thoroughly
5. Submit a pull request

## ğŸ“„ License

This project is licensed under the MIT License - see the LICENSE file for details.

## ğŸ†˜ Support

If you encounter issues:

1. Check the Troubleshooting section above
2. Review the browser console for errors
3. Check Django logs in the terminal
4. Ensure all services (Redis, Django, Celery) are running

## ğŸ¯ Roadmap

Future enhancements:
- [ ] Markdown editor mode
- [ ] Version history and rollback
- [ ] Advanced spreadsheet formulas
- [ ] Document templates
- [ ] Mobile app
- [ ] File attachments
- [ ] Comment threads
- [ ] Activity feed
- [ ] Dark mode

---

Built with â¤ï¸ using Django and React
